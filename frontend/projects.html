<nav>
  <div class="nav-items">
    <a href="/" class="nav-item">Home</a>
    <a href="/projects" class="nav-item">Projects</a>
    <a href="/skills" class="nav-item">Skills</a>
    <a href="/experience" class="nav-item">Experience</a>
    <a href="/blog" class="nav-item">Blog</a>
    <a href="/contact" class="nav-item">Contact</a>
  </div>
  <div class="latency" id="latency"></div>
</nav>

<section class="projects">
  <div class="projects-grid" id="projects-container">
    <div class="loading">Loading kernel projects...</div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    const container = document.getElementById("projects-container")

    try {
      const response = await fetch("/api/projects")
      if (!response.ok) throw new Error("Failed to load projects")
      const projects = await response.json()

      container.innerHTML = ""
      projects.forEach((project) => {
        const card = document.createElement("div")
        card.className = "project-card"
        card.innerHTML = `
                <h3>${project.name}</h3>
                <div class="metrics">
                    <div class="metric">
                        <span class="label">CVE Patched:</span>
                        <span class="value">${project.cves}</span>
                    </div>
                    <pre><code>${project.codeSnippet}</code></pre>
                </div>
            `
        container.appendChild(card)
      })
    } catch (error) {
      showError(
        `Failed to load projects: ${error.message}`,
        "projects-container"
      )
    }
  })
</script>
